<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Servlet Level 2 Quiz</title>
  <link rel="stylesheet" href="quiz.css">
</head>
<body>
  <div class="title">Servlet Level 2 Quiz</div>
<div class="quiz">
  <div class="question"></div>
  <p class="option" id="option1"></p>
  <p class="option" id="option2"></p>
  <p class="option" id="option3"></p>
  <p class="option" id="option4"></p>
  <div class="progress">This is x of y questions.</div>
</div>
<div class="startBtn" onclick="startGame();"><p id="startText">Start Quiz</p></div>
<div class="gameOver">

  <h1>Game Over</h1>
  <p id="score">You got x out of y answers right</p>
</div>
<script>
  //Global variables
var questionDisplay = document.querySelector(".question");
var option1 = document.querySelector("#option1");
var option2 = document.querySelector("#option2");
var option3 = document.querySelector("#option3");
var option4 = document.querySelector("#option4");
var quiz = document.querySelector(".quiz");
var startBtn = document.querySelector(".startBtn");
var startText = document.querySelector("#startText");
var gameOver = document.querySelector(".gameOver");

//Initiate values
var correctAnswers = 0;
let question;

function startGame(){
  gameOver.style.visibility = "hidden";
  startBtn.style.visibility = "hidden";
  quiz.style.visibility = "visible";
  correctAnswers = 0;
  questionOne();
}

//Functions that create questions and answers
var questionOne = () => {
  question = {
  number: "1",
  question: "1.When service() method of servlet gets called?",
  option1: "The service() method is called when the servlet is first created.",
  option2: "The service() method is called whenever the servlet is invoked.",
  option3: "Both of the above",
  option4: "None of the above",
  correctAnswer: "The service() method is called whenever the servlet is invoked."
  };
  displayQuestion(question);
  displayProgress(question.number);
  return question;
};

var questionTwo = () => {
  question = {
    number: "2",
    question: "2.Which of the following is true about destroy() method of servlet?",
    option1: "After the destroy() method is called, the servlet object is marked for garbage collection.",
    option2: "The servlet is terminated by calling the destroy() method.",
    option3: "Both of the above.",
    option4: "None of the above",
    correctAnswer: "Both of the above."
  };
  displayQuestion(question);
  displayProgress(question.number);
  return question;
};

var questionThree = () => {
  question = {
    number: "3",
    question: "3.Which of the following code is used to get names of the attributes in servlet?",
    option1: "response.getAttributeNames()",
    option2: "request.getAttributeNames()",
    option3: "Header.getAttributeNames()",
    option4: "None of the above.",
    correctAnswer: "request.getAttributeNames()"
  };
  displayQuestion(question);
  displayProgress(question.number);
  return question;
};

var questionFour = () => {
  question = {
    number: "4",
  question: "4.Which of the following code retrieves the MIME type of the body of the request?",
  option1: "new MimeType()",
  option2: "request.getContentType()",
  option3: "response.getContentType()",
  option4: "none of these",
  correctAnswer: "request.getContentType()"
  };
  displayQuestion(question);
  displayProgress(question.number);
  return question;
};

var questionFive = () => {
  question = {
    number: "5",
  question: "5.Which of the following code indicates whether the response has been committed?",
  option1: "response.isCommitted()",
  option2: "request.isCommitted()",
  option3: "Header.isCommitted()",
  option4: "none of these",
  correctAnswer: "response.isCommitted()"
  };
  displayQuestion(question);
  displayProgress(question.number);
  return question;
};

var questionSix = () => {
  question = {
  number: "6",
  question: "6.Which of the following code can be used to redirect user to different url?",
  option1: "request.sendRedirect(location)",
  option2: "response.sendRedirect(location)",
  option3: "header.sendRedirect(location)",
  option4: "none of these",
  correctAnswer: "response.sendRedirect(location)"
  };
  displayQuestion(question);
  displayProgress(question.number);
  return question;
};

var questionSeven = () => {
  question = {
  number: "7",
  question: "7.Which of the following code can be used to set the locale of the response?",
  option1: "request.setLocale(locale)",
  option2: "header.setLocale(locale)",
  option3: "response.setLocale(locale)",
  option4: "none of these",
  correctAnswer: "response.setLocale(locale)"
  };
  displayQuestion(question);
  displayProgress(question.number);
  return question;
};

var questionEight = () => {
  question = {
  number: "8",
  question: "8.Which of the following code is used to get a HTTP Session object in servlets?",
  option1: "request.getSession()",
  option2: "response.getSession()",
  option3: "new Session()",
  option4: "none of these",
  correctAnswer: "request.getSession()"
  };
  displayQuestion(question);
  displayProgress(question.number);
  return question;
};

var questionNine = () => {
  question = {
  number: "9",
  question: "9.Which of the following code is used to get locale in servlets?",
  option1: "request.getLocale()",
  option2: "Locale.getLocale()",
  option3: "response.getLocale()",
  option4: "None of the above",
  correctAnswer: "request.getLocale()",
  };
  displayQuestion(question);
  displayProgress(question.number);
  return question;
};

var questionTen = () => {
  question = {
  number: "10",
  question: "10.________ method obtains a byte-based output stream that enables binary data to be sent to the client.",
  option1: "sendRedirect()",
  option2: "getOutput()",
  option3: "getWirter()",
  option4: "getOutputStream()",
  correctAnswer: "getOutputStream()"
  };
  displayQuestion(question);
  displayProgress(question.number);
  return question;
};
//Show progress throughout quiz
function displayProgress(currentQuestion){
  var progress = document.querySelector(".progress");
  progress.innerHTML = `This is ${currentQuestion} of 10 questions.`
}

//Show questions and potential answers
function displayQuestion(question){
  questionDisplay.innerHTML = question.question;
  option1.innerHTML = question.option1;
  option2.innerHTML = question.option2;
  option3.innerHTML = question.option3;
  option4.innerHTML = question.option4;
}

//Check if answer is correct, add to correct answers count
function checkAnswer(e, question){
  if (e.target.innerHTML === question.correctAnswer){
    correctAnswers++;
  }
}

//Load next question
function moveToNextQuestion(currentQuestion){
  switch (currentQuestion){
    case "1":
      questionTwo();
      break;
      case "2":
      questionThree();
      break;
      case "3":
      questionFour();
      break;
      case "4":
      questionFive();
      break;
      break;
      case "5":
      questionSix();
      break;
      break;
      case "6":
      questionSeven();
      break;
      break;
      case "7":
      questionEight();
      break;
      break;
      case "8":
      questionNine();
      break;
      break;
      case "9":
      questionTen();
      break;
      case "10":
      showScore(correctAnswers);
      break;
    default:
  }
  
}

//Game over, reveal score
function showScore(correctAnswers){
  var score = document.getElementById("score");
  score.innerHTML = `You got ${correctAnswers} out of 10 answers correct!`;
  quiz.style.visibility = "hidden";
  gameOver.style.visibility = "visible";
  startText.innerHTML = "Play Again";
  startBtn.style.visibility = "visible";
}

//On each click, check selected option and change to next question.
document.querySelectorAll('.option').forEach(option => {
  option.addEventListener('click', function(e) {
  if (e.target.classList.contains("option")){
    
    checkAnswer(e, question);
    moveToNextQuestion(question.number);
  } else {
    console.log("answer not selected");
  }
});
});
</script>
</body>
</html>